<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="masonry.css">
    <title>Document</title>
</head>
<body>
    <div class="images">
        <div class="image">
          <img src="https://images.unsplash.com/photo-1552633832-4f5a1b110980?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=400&fit=max&ixid=eyJhcHBfaWQiOjYxOTE2fQ" alt="">
          <span>0</span>
        </div>
        <div class="image">
          <img src="https://images.unsplash.com/photo-1552584010-ca8bbbd5bd18?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=400&fit=max&ixid=eyJhcHBfaWQiOjYxOTE2fQ" alt="">
          <span>1</span>
        </div>
        <div class="image">
          <img src="https://images.unsplash.com/photo-1552644867-3c98a63f38eb?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=400&fit=max&ixid=eyJhcHBfaWQiOjYxOTE2fQ" alt="">
          <span>2</span>
        </div>
        <div class="image">
          <img src="https://images.unsplash.com/photo-1552620543-31d952829801?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=400&fit=max&ixid=eyJhcHBfaWQiOjYxOTE2fQ" alt="">
          <span>3</span>
        </div>
        <div class="image">
          <img src="https://images.unsplash.com/photo-1552602989-715150494024?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=400&fit=max&ixid=eyJhcHBfaWQiOjYxOTE2fQ" alt="">
          <span>4</span>
        </div>
      </div>

      <script>
        window.onload = () => {
            let images = document.querySelectorAll(".image");
            let imgStack = [0, 0];
            let colWidth = 250;
            for(let i = 0; i < images.length; i++) {
              let minIndex = imgStack.indexOf(Math.min.apply(0, imgStack));
          
              //이미지 스택에서 길이가 짧은 애를 받는거.
              console.log(colWidth)
              console.log(minIndex)
              let x = colWidth * minIndex;
              let y = imgStack[minIndex];

              imgStack[minIndex] += (images[i].children[0].height + 20);
              images[i].style.transform = `translateX(${x}px) translateY(${y}px)`;
              if(i === images.length - 1) {
                document.querySelector(".images").style.height = `${Math.max.apply(0, imgStack)}px`;
              }
            }
          }
      </script>
</body>
</html>