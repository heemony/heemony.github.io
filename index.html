<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/bxslider/4.2.12/jquery.bxslider.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/bxslider/4.2.12/jquery.bxslider.min.js"></script>

    <link rel="stylesheet" href="index.css">

    <title>SONGHEEMYUN93</title>
</head>
<body>
    <div class="desktop">
        <div class="desktop_icon left_top">
            <div class="icon_wrapper">
                <a href="#"><img src="gif_files/XlO9.gif" alt=""></a>         
            </div>
            <div class="left_top_title">Click  Me!</div>
        </div>
        <div class="desktop_icon iconMs">
            <div class="icon_wrapper">
                <a href="#">
                    <img src="icon_images/ms_image.gif" alt="Microsoft">
                </a>         
            </div>
            <div class="title">Microsoft</div>
        </div>
        <div class="desktop_icon icon29">
            <div class="icon_wrapper">
                <a href="#">
                    <img src="icon_images/sp_29cm.png" alt="29CM">
                </a>         
            </div>
            <div class="title">29CM</div>
        </div>
        <div class="desktop_icon iconCarhartt">
            <div class="icon_wrapper">
                <a href="#">
                    <img src="icon_images/carhartt.png" alt="Carhartt WIP">
                </a>         
            </div>
            <div class="title">Carhartt WIP</div>
        </div>
        <div class="desktop_icon iconEyescream">
            <div class="icon_wrapper">
                <a href="#">
                    <img src="icon_images/eyescream.gif" alt="Eyescream">
                </a>         
            </div>
            <div class="title">Eyescream</div>
        </div>
        <div class="desktop_icon iconNaver">
            <div class="icon_wrapper">
                <a href="#">
                    <img src="icon_images/naver.png" alt="Naver">
                </a>         
            </div>
            <div class="title">Naver</div>
        </div>
        <div class="desktop_icon iconKakaobank">
            <div class="icon_wrapper">
                <a href="#">
                    <img src="icon_images/kakaobank.png" alt="KakaoBank">
                </a>         
            </div>
            <div class="title">KakaoBank</div>
        </div>
        <div class="desktop_icon iconStarwars">
            <div class="icon_wrapper">
                <a href="#">
                    <img src="icon_images/starwars.png" alt="Starwars">
                </a>         
            </div>
            <div class="title">Starwars</div>
        </div>
        <div class="desktop_icon iconYoutube">
            <div class="icon_wrapper">
                <a href="https://www.youtube.com/watch?v=RwCp5e7y3w0">
                    <img src="icon_images/youtube.png" alt="Youtube">
                </a>         
            </div>
            <div class="title">Youtube Channel</div>
        </div>
    </div>

    <!-- taskBar -->
    <div class="taskBar">
        <div class="taskBar_btn">
            <button class="startBtn toggle">
                <img src="windows_images/start.png" alt="">
                <b>start</b>
            </button>
            <div class="taskBar_submenu">
                <div class="taskBar_titleBar">
                    <p>SHM<span style="color:rgb(255, 247, 0)">93</span></p>
                </div>
                <ul class="menu">
                    <li class="menuitem">
                        <img src="win93_images/start.png" alt="">
                        <span>HI</span>
                    </li>
                    <li class="menuitem">
                        <img src="" alt="">
                        <span>How are you?</span>
                    </li>
                    <li class="menuitem">
                        <img src="" alt="">
                        <span>I'm fine.</span>
                    </li>
                    <li class="menuitem">
                        <img src="" alt="">
                        <span>Thank you</span>
                    </li>
                    <li class="menuitem">
                        <img src="" alt="">
                        <span>Bye.</span>
                    </li>
                    <li class="menuitem shutdown">
                        <img src="" alt="">
                        <span>Shutdown</span>
                    </li>
                </ul>
            </div>
        </div>
        <div class="taskBar_divider"></div>
        <div class="task"></div>
        <div class="taskBar_divider"></div>
        <div class="taskTray">
            <div class="tray_icon">
                <img src="windows_images/task-scheduler-16x16.png" alt="">
                <img src="windows_images/audio-okay-16x16.png" alt="">
            </div>
            <div class="taskBar_time">
                <div id="clock"></div>
            </div>
        </div>
    </div>

    <!-- 클릭하면 div를 추가하면서 얘가 보이게 만들어야함. -->
    <div class="window">
        <div class="window_titlebar">
            <img class="icon" src="icon_images/wow2_main_1.png" alt="">
            <div class="window_title_area">
                <span>README...</span>
            </div>
            <button class="window_min_button window_btn"></button>
            <button class="window_max_button window_btn"></button>
            <button class="window_close_button window_btn"></button>
        </div>
        <div class="window_content">
            <div class="window_content_area">
                <div>
                    <img class="window_c_icon" src="win93_images/paint.png" alt=""><span>SONG HEE MYUN</span>
                </div>
                <div>
                    <img class="window_c_icon" src="win93_images/poney.gif" alt=""><span>heemony.github.io</span>
                </div>
                <div>
                    <img class="window_c_icon" src="win93_images/voice.png" alt=""><span>01075530514</span>
                </div>
                <div>
                    <img class="window_c_icon" src="win93_images/mail.png" alt=""><span>noodle9323@naver.com</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        var winBrowser = document.querySelector('.window');
        var winBtn = winBrowser.querySelector('.window_titlebar');
        winBtn.addEventListener('click', btnWork);
        function btnWork(e){
            e.preventDefault();
            console.log(e.target);
            if(e.target.className === '.window_min_button'){
                console.log('작게')
            }else if(e.target.className === '.window_max_button'){
                console.log('크게')
            }else if(e.target.className === '.window_close_button'){
                winBrowser.classList.add('off');
            }
        };
       
        // var minBtn = document.querySelector('.window_min_button');
        // var maxBtn = document.querySelector('.window_max_button');
        // var closeBtn = document.querySelector('.window_close_button');
        
        // closeBtn.addEventListener('click', function(){
        //     winBrowser.classList.add('off');
        // });
        
    </script>
    <script>
        var startBtn = document.querySelector('.startBtn');
        var showMenu = document.querySelector('.taskBar_submenu');

        startBtn.addEventListener('click', function(){
            if(startBtn.className === 'startBtn toggle'){
                startBtn.classList.add('clickbtn');
                showmenu();
            }else{
                startBtn.classList.remove('clickbtn');
                showMenu.classList.remove('clickbtn');
            }
        });
        function showmenu(){
            showMenu.classList.add('clickbtn');
        }

    </script>

    <script>
        var desktopBtn = document.querySelector('.desktop');
        document.addEventListener('dblclick', showWin);
        function showWin(e){
            e.preventDefault();
            console.log('더블클릭됐어')
            if(e.target.parentNode !== 'desktop_icon') {return};
            
            var newDiv = desktopBtn.createElement('div');
            console.log(newDiv)
            // newDiv.appendChild('div.window');
            document.body.insertBefore(newDiv, desktopBtn); 
        };
    </script>

    
    <script>
        'use strict';

        setDrag('div.iconMs');
        setDrag('div.icon29');
        setDrag('div.iconCarhartt');
        setDrag('div.iconEyescream');
        setDrag('div.iconNaver');
        setDrag('div.iconStarwars');
        setDrag('div.iconKakaobank');
        setDrag('div.iconYoutube');
        // setDrag('.window');

        function setDrag(selector) {
            var startX = 0;
            var startY = 0;
            var delX = 0;
            var delY = 0;
            var offsetX = 0;
            var offsetY = 0;
            var isTouched = false;
            var isClickAllowed = true;
            
            $(selector).on('mousedown touchstart', function(e) {
                e = (e.clientX === undefined) ? e.touches[0] : e;
                startX = e.clientX;
                startY = e.clientY;
                offsetX = $(this).position().left;
                offsetY = $(this).position().top;
                $(selector).addClass('on');
                isTouched = true;
            }).on('click', function(e) {
                if (isClickAllowed === false) {
                    e.preventDefault();
                    isClickAllowed = true;
                }
            });
            
            document.addEventListener('mousemove', move, {passive: false});
            document.addEventListener('touchmove', move, {passive: false});
            
            $(document).on('mouseup touchend', function(e) {
                if (isTouched === true) {
                    $(selector).removeClass('on');
                    isTouched = false;
                }
            });
            
            function move(e) {
                if (isTouched === false) return false;
                e.preventDefault();
                e = (e.clientX === undefined) ? e.touches[0] : e;
                delX = e.clientX - startX;
                delY = e.clientY - startY;
                $(selector).css({'left': (offsetX + delX) + 'px', 'top': (offsetY + delY) + 'px'});
                if (Math.abs(delX) > 10 || Math.abs(delY) > 10) isClickAllowed = false;
            }
        }
    </script>
    <script src="taskBar_time.js"></script>
</body>
</html>